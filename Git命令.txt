mkdir git
cd git
pwd

git init   初始化仓库

git add <file>   
git commit -m <message>

git status
git diff
cat <file>

git log
git log --pretty=oneline

git reset --hard HEAD^     回退到上一个版本
git reset --hard HEAD~n    回退到上N个版本
git reflog                 历史记录，方便查看commit id
git reset --hard ID        回退到指定版本，ID为commit id
git diff HEAD -- <file>    查看工作区和版本库里面最新版本的区别
git checkout -- <file>     撤销修改和恢复删除

rm <file>                  删除工作区文件
git rm <file> & git commit <file>    彻底删除版本库文件

1、创建SSH keys
ssh-keygen -t rsa -C "zhy5205318@sina.com"
用户主目录里找到.ssh目录，里面有id_rsa和id_rsa.pub两个文件，这两个就是SSH Key的秘钥对，id_rsa是私钥，不能泄露出去，id_rsa.pub是公钥

2、登陆GitHub，打开“Account settings”，“SSH Keys”页面：
然后，点“Add SSH Key”，填上任意Title，在Key文本框里粘贴id_rsa.pub文件的内容：

添加远程库
Github创建： create new repos  如：Git

git remote add origin https://github.com/heaxen/Git.git    本地仓库添加到远程仓库
git push -u origin master / git push origin master         同步文件到远程仓库
git clone https://github.com/heaxen/Git                    克隆远程仓库到本地

创建分支
git checkout -b dev   参数-b表示创建并切换
等价于下面两条命令
git branch dev
git checkout dev
git branch            列出所有分支，当前分支前面会标一个*号

分支修改之后执行
git add <file>
git commit -m <message>
git checkout master   切换回主线

git merge dev         合并分支代码到当前分支
git branch -d dev     删除分支

git log --graph                                     可以看到分支合并图
git log --graph --pretty=oneline --abbrev-commit    看分支合并情况



Bug分支
有利于解决在dev分支进行开发的同时，既不想提交分支代码，但是又要解决当前分支上的Bug的问题

需求：在master分支修复Bug，当前分支为dev
git stash                    把当前工作现场‘储藏’起来，等恢复现场之后继续工作
git checkout master          切换到master分支
git checkout -b issue-101    在master分支拉取修复Bug的临时分支
git add <file>               
git commit -m <message>
git checkout master
git merge --no-ff -m "<message>" issue-101     合并分支时，加上--no-ff参数，表示禁用Fast forward，此时就可以用普通模式合并，
											   合并后的历史有分支，能看出来曾经做过合并，而fast forward合并就看不出来曾经做过合并。
git branch -d issue-101                删除临时分支
git checkout dev                       最后切换到dev分支
git stash list                         查看之前‘储藏’的工作现场
git stash apply  &  git stash drop     恢复工作现场方法1，但是恢复后，stash内容并不删除，你需要用git stash drop来删除
git stash pop                          恢复工作现场方法2，恢复的同时把stash内容也删了

可以多次stash，恢复的时候，先用git stash list查看，然后恢复指定的stash，用命令：
git stash apply stash@{0}



Feature分支
每添加一个新功能，最好新建一个feature分支，在上面开发，完成后，合并，最后，删除该feature分支。
样例：
git checkout -b feature-vulcan
git add vulcan.py
git commit - m "add feature vulcan"
git checkout dev

准备合并（git merge --no-ff -m "merge feature vulcan" feature-vulcan），但是这个功能需要取消，使用删除命令
git branch -d feature-vulcan
feature-vulcan分支还没有被合并，如果删除，将丢失掉修改，如果要强行删除，需要使用大写的-D参数
git branch -D feature-vulcan



协作开发
git remote  & git remote -v     查看远程库信息
git push origin master          推送本地master分支代码到远程库
git push origin dev             推送本地dev分支代码到远程库

git clone https://github.com/heaxen/Git      抓取分支，可以在另一台电脑（注意要把SSH Key添加到GitHub）或者同一台电脑的另一个目录下克隆
git checkout -b dev origin/dev               协作伙伴需要在dev分支上开发，就必须创建远程origin的dev分支到本地

修改后进行推送
git add <file>
git commit -m <message>
git push origin dev

如果其他开发者已经向origin/dev分支推送了他的提交，而碰巧你也对同样的文件作了修改，并试图推送就会出现冲突
git pull          把最新的提交从origin/dev抓下来，然后，在本地合并，解决冲突，再推送

如果git pull也失败了，原因是没有指定本地dev分支与远程origin/dev分支的链接，根据提示，设置dev和origin/dev的链接
git branch --set-upstream-to=origin/dev dev   ( git branch --set-upstream-to <branch-name> origin/<branch-name> )
然后继续git pull，最后再git push